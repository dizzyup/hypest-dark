// Tabs
// -------------------

// Displays selectable tabs above the editor.
// Overrides: atom/tabs

.tab-bar {
  overflow-x: auto;
  overflow-y: hidden;
  background: @mid-color;
  border-radius: 0;

  .tab {
    text-align: center;
    color: fade(@text-color, 70%);
    height: @tab-height;
    line-height: @tab-height;
    font-size: @font-size;
    min-width: 120px;
    flex: 1 1 100%;
    padding: 0 24px;
    max-width: 100%;
    margin-right: 1px;
    background: @tab-background-color;
    box-shadow: inset 0 -1px 0 0 @mid-color;

    &:hover {
      color: @text-color;
      background: @mid-color;
    }

    &.active {
      flex: 1 1 100%;
      color: @text-color;
      background-image: linear-gradient(
        @tab-background-color-active-1,
        @tab-background-color-active-2
      );
      box-shadow: inset 0 -1px 0 @tab-background-color;
      transition: none;
    }

    &:last-child {
      margin: 0;
    }

    &.modified::after {
      content: "";
      position: absolute;
      top: 50%;
      right: 9px;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin-top: -3px;
      opacity: 1;
      background: fade(@text-color, 70%);
    }

    &.active.modified::after {
      background: @text-color-info;
    }

    .close-icon,
    &.modified .close-icon,
    &.modified:not(:hover) .close-icon {
      color: @text-color;
      width: 16px;
      height: 16px;
      top: 8px;
      left: 6px;
      right: auto;
      border: none;
      opacity: 0;
      border-radius: 3px;
      transition: opacity ease 0.3s, color ease 0.1s, background ease 0.1s;
    }
    &:hover {
      .close-icon,
      &.modified .close-icon,
      &.modified:not(:hover) .close-icon {
        color: @text-color;
        opacity: 1;
      }
    }
    .close-icon,
    &.modified .close-icon,
    &.modified:not(:hover) .close-icon {
      &:hover {
        background: fade(@dark-color, 10%);
      }
    }
    .close-icon::before {
      position: absolute;
      top: 1px;
      left: 2px;
      line-height: 13px;
    }

    &.is-dragging {
      background: darken(@tab-background-color, 10%);
      border-color: transparent;
      opacity: 0.5;
      & .close-icon {
        visibility: hidden;
      }
    }

    .title {
      padding: 0 !important;
    }

    [class*="icon-"]::before {
      font-size: 13px;
    }
  }
}

.is-blurred {
  .tab-bar {
    background: @title-bar-stop-2;
  }

  .tab {
    color: @text-color-subtle;
    background: @tab-background-color-active-1;
    box-shadow: inset 0 -1px 0 0 fade(@mid-color, 30%);
    transition: none;

    &.active {
      color: @text-color-subtle;
      background: @light-color;
      box-shadow: inset 0 -1px 0 fade(@tab-background-color, 60%);
    }
  }
}

atom-panel-container.left,
atom-panel-container.right,
atom-panel-container.bottom {
  .tab-bar {
    overflow-x: auto;
    overflow-y: hidden;
    background: @tab-bar-background-color;
    border-radius: 0;

    .tab {
      color: fade(@text-color-subtle, 60%);
      background: @light-color;
      box-shadow: inset 0 -1px 0 @tab-bar-background-color;

      &:hover {
        color: @text-color;
        background: @lighter-color;
      }

      &.active {
        color: @text-color;
        font-weight: 500;
        background: @lighter-color;
        box-shadow: inset 0 -1px 0 @tab-bar-background-color;
      }

      &:only-child {
        text-align: left !important;
        background: @light-color !important;
        box-shadow: none !important;
        padding: 0 10px;

        .title {
          font-weight: 600;
          color: fade(@text-color, 50%);
        }

        .close-icon {
          left: auto;
          right: 6px;
        }
      }
    }
  }
}

body:hover .tab {
  transition: ease 0.2s;
}

.tab-bar::-webkit-scrollbar {
  height: 0 !important;
}
