atom-text-editor[mini],
atom-text-editor.mini {
  display: flex;
  align-items: center;
  padding-left: @component-padding / 2;
  color: @text-color;
  min-height: 28px;
  max-height: 100%;
  border: none;
  border-radius: @component-border-radius;
  background-color: @input-background-color;
  box-shadow: inset 0 0 0 1px fade(@white-color, 10%),
    0 0 0 1px fade(@black-color, 5%);

  > div {
    background: none !important;
  }

  .selection .region {
    background: fade(@white-color, 5%);
  }

  &.is-focused {
    background-color: lighten(@input-background-color, 2%);
    box-shadow: inset 0 0 0 1px fade(@white-color, 0%),
      0 0 0 1px fade(@blue-color, 30%), 0 0 0 3px fade(@blue-color, 50%);

    .selection .region {
      background: @region-selection-color;
    }
  }

  .placeholder-text {
    color: @text-color-subtle;
  }

  .lines {
    padding-left: 0;
  }

  .cursor-line {
    position: relative;

    &::before {
      display: none;
    }
  }

  .cursor {
    border-color: @text-color;
  }
}

// Light theme support

.hypest-light-syntax {

  atom-text-editor.editor:not(.mini) {

    .lines {
      padding-left: 3px;

      .cursor-line {
        position: relative;
        background: fade(@darker-color, 3%);

        &::before {
          content: "";
          position: absolute;
          left: -3px;
          top: 0;
          bottom: 0;
          width: 3px;
          background: fade(@darker-color, 3%);
        }
      }
    }

    .gutter {
      background: fade(@darker-color, 3%);
      box-shadow: inset -1px 0 0 fade(@dark-color, 5%);

      .line-number {
        padding-right: 4px;
        background: transparent;
        box-shadow: none;

        &.cursor-line {
          box-shadow: inset -1px 0 0 fade(@dark-color, 5%);
          background: fade(@darker-color, 5%);
        }

        &.cursor-line-no-selection {
          box-shadow: inset -1px 0 0 fade(@dark-color, 5%);
          background: fade(@darker-color, 5%);
        }

        &.git-line-modified {
          border: none;

          &::before {
            content: "";
            position: absolute;
            right: 0;
            width: 2px;
            top: 0;
            bottom: 0;
            background: fade(@orange-color, 85%);
          }
        }

        &.git-line-added {
          border: none;

          &::before {
            content: "";
            position: absolute;
            right: 0;
            width: 2px;
            top: 0;
            bottom: 0;
            background: fade(@green-color, 85%);
          }
        }

        &.git-line-removed:before,
        &.git-previous-line-removed:before {
          left: auto;
          right: -4px;
          z-index: 4;
          bottom: 0;
          border-left: 5px solid @red-color;
          border-top-width: 3px;
          border-bottom-width: 3px;
        }
      }
    }

    .gutter[gutter-name="github-comment-icon"] {
      order: -99;
      margin-right: -1px;
      background: @white-color;
      min-width: 2em;

      .github-editorCommentGutterIcon.react-atom-decoration {
        padding: 0;

        .icon-comment::before {
          color: @blue-color;
          margin-top: 1px;
          margin-right: 1px;
        }
      }
    }

    .github-editorCommentHighlight {
      box-shadow: inset 0 0 0 1px fade(@blue-color, 15%);
      width: calc(~"100% " - 6px);
      background: fade(@blue-color, 5%);

      &.cursor-line {
        box-shadow: inset 0 0 0 1px @light-color;
        background: @lighter-color;
      }
    }

    .selection .region {
      border-radius: 0;
    }

    .wrap-guide {
      background: none;
      margin-left: 4px;
      border-right: 1px dotted @base-border-color;
    }

    .invisible-character, .indent-guide {
      color: @base-border-color;
    }

    .indent-guide {
      box-shadow: none;
      border-left: 1px solid fade(@base-border-color, 30%);
    }
  }
}

// Dark theme support

.hypest-dark-syntax {

  atom-text-editor.editor:not(.mini) {

    .lines {
      padding-left: 3px;

      .cursor-line {
        position: relative;
        background: fade(@white-color, 5%);

        &::before {
          content: "";
          position: absolute;
          left: -3px;
          top: 0;
          bottom: 0;
          width: 3px;
          background: fade(@white-color, 5%);
        }
      }
    }

    .gutter {
      background: fade(@black-color, 25%);
      box-shadow: inset -1px 0 0 fade(@white-color, 10%);

      .line-number {
        padding-right: 4px;
        background: transparent;
        box-shadow: none;

        &.cursor-line {
          box-shadow: inset -1px 0 0 fade(@white-color, 5%);
          background: fade(@white-color, 10%) !important;
        }

        &.cursor-line-no-selection {
          box-shadow: inset -1px 0 0 fade(@white-color, 5%);
          background: fade(@white-color, 15%) !important;
        }

        &.git-line-modified {
          border: none;

          &::before {
            content: "";
            position: absolute;
            right: 0;
            width: 2px;
            top: 0;
            bottom: 0;
            background: fade(@orange-color, 100%);
          }
        }

        &.git-line-added {
          border: none;

          &::before {
            content: "";
            position: absolute;
            right: 0;
            width: 2px;
            top: 0;
            bottom: 0;
            background: fade(@green-color, 100%);
          }
        }

        &.git-line-removed:before,
        &.git-previous-line-removed:before {
          left: auto;
          right: -4px;
          z-index: 4;
          bottom: 0;
          border-left: 5px solid @red-color;
          border-top-width: 3px;
          border-bottom-width: 3px;
        }
      }
    }

    .gutter[gutter-name="github-comment-icon"] {
      order: -99;
      margin-right: -1px;
      background: fade(@black-color, 25%);
      min-width: 2em;

      .github-editorCommentGutterIcon.react-atom-decoration {
        padding: 0;

        .icon-comment::before {
          color: @blue-color;
          margin-top: 1px;
          margin-right: 1px;
        }
      }
    }

    .github-editorCommentHighlight {
      box-shadow: inset 0 0 0 1px fade(@blue-color, 15%);
      width: calc(~"100% " - 6px);
      background: fade(@blue-color, 5%);

      &.cursor-line {
        box-shadow: inset 0 0 0 1px fade(@blue-color, 15%);
        background: fade(@blue-color, 15%) !important;
      }
    }

    .selection .region {
      border-radius: 0;
    }

    .wrap-guide {
      background: none;
      margin-left: 4px;
      border-right: 1px dotted fade(@white-color, 10%);
    }

    .invisible-character, .indent-guide {
      color: fade(@white-color, 10%);
    }

    .indent-guide {
      box-shadow: none;
      border-left: 1px solid fade(@white-color, 5%);
    }
  }
}
